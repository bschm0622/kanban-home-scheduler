---
import ThemeToggle from "@/components/ThemeToggle.astro";
import { SITE } from "@/siteConfig";

const navLinks = SITE.nav;
---

<style>
    input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        pointer-events: none;
    }

    .hamburger-line {
        width: 24px;
        height: 2px;
        background-color: currentColor;
        transition:
            transform 0.3s ease,
            opacity 0.3s ease;
        transform-origin: center;
    }

    /* Wrapper to help center alignment */
    .hamburger {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 5px;
        width: 24px;
        height: 24px;
        position: relative;
    }

    /* Animate to X (perfect symmetry fix) */
    input:checked + label .line1 {
        transform: rotate(45deg) translateY(0);
        position: absolute;
        top: 11px;
    }

    input:checked + label .line2 {
        opacity: 0;
    }

    input:checked + label .line3 {
        transform: rotate(-45deg) translateY(0);
        position: absolute;
        top: 11px;
    }

    /* Mobile menu animation */
    .mobile-menu {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        border-top: none;
    }
    input:checked ~ .mobile-menu {
        max-height: 300px;
    }
</style>

<nav class="px-4 py-6 flex items-center justify-between text-xl">
    <!-- Logo -->
    <a href="/" class="font-semibold">
        {SITE.name || SITE.title}
    </a>

    <!-- Right side (nav + theme toggle) -->
    <div class="hidden md:flex items-center space-x-10">
        <ul class="flex space-x-10">
            {
                navLinks.map((link) => (
                    <li>
                        <a
                            href={link.href}
                            class="hover:underline"
                        >
                            {link.label}
                        </a>
                    </li>
                ))
            }
        </ul>
        <ThemeToggle />
    </div>

<!-- Mobile Nav -->
<div class="flex items-center md:hidden space-x-4 relative">
    <!-- Theme Toggle always visible -->
    <ThemeToggle id="theme-toggle-mobile" />

    <!-- Toggle Button -->
    <input type="checkbox" id="menu-toggle" class="peer" />
    <label
        for="menu-toggle"
        class="cursor-pointer hamburger"
        aria-label="Toggle menu"
    >
        <span class="hamburger-line line1"></span>
        <span class="hamburger-line line2"></span>
        <span class="hamburger-line line3"></span>
    </label>

    <!-- Dropdown Menu -->
    <div
        class="mobile-menu fixed left-0 right-0 top-[50px] bg-background shadow-lg"
        id="mobile-menu"
    >
        <ul class="px-4 py-6 space-y-4">
            {
                navLinks.map((link) => (
                    <li>
                        <a
                            href={link.href}
                            class="block py-3 text-lg font-medium"
                        >
                            {link.label}
                        </a>
                    </li>
                ))
            }
        </ul>
    </div>
</div>
